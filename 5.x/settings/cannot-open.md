---
description: 画面が真っ白になったり、エラーが表示されたりしてPortalDotsを開けなくなった場合の対処法をご説明します。
---

# PortalDotsを開けなくなったとき（PortalDotsの再インストール）

PortalDotsを開いた際、以下のような症状が発生した場合は、PortalDotsを再インストールすることで問題が解決する可能性があります。

* 画面が真っ白になる。
* サーバーエラーと表示され、PortalDotsの機能が利用できない。

PortalDotsを再インストールするには、以下の手順に従ってください。

{% hint style="info" %}
このページに記載の方法で再インストールすることで、データを削除することなくPortalDotsを再インストールできます。
{% endhint %}

## PortalDotsを再インストールする <a href="#reinstall" id="reinstall"></a>

PortalDotsを再インストールするには、以下の手順に従ってください。

1. FTPソフト（Cyberduckなど）で、PortalDotsをインストールしたサーバーに接続します。
2. 現在サーバー上にあるPortalDots関連ファイルを、すべてお使いのコンピューターにダウンロードします（バックアップ）。
    * 最低でも以下のファイルはダウンロードする必要があります。
        * `.env` ファイル（PortalDotsインストーラーなどで設定したPortalDotsの設定が保存されています）
        * `storage` フォルダー内の `app` フォルダー（配布資料、および申請フォームにアップロードされたファイルが保存されています。必ずダウンロードしてください）
        * （ロリポップ！レンタルサーバーをご利用の場合のみ） `cron` フォルダー内の `lolipop.sh` ファイル（このファイルが存在しない場合はダウンロード不要）
3. サーバー上のPortalDots関連ファイルをすべて削除します。
    * 必ず、上記 `2.` の作業を行った後に行ってください。
    * ユーザー情報、企画情報、場所情報、お知らせ、配布資料（ファイル本体以外の情報）、申請フォームとその回答、お問い合わせ受付設定、スタッフの権限設定はデータベース上に保存されています。FTPソフトでファイルを削除しても、これらの情報は削除されませんのでご安心ください。
4. PortalDotsの最新版をダウンロードします。
    * 現在お使いのPortalDotsのバージョンに合わせて、以下のURLからPortalDotsをダウンロードしてください。
        * [PortalDots 5を利用中の場合](https://releases.portaldots.com/downloads/latest.zip?major_version=5)
        * [PortalDots 4を利用中の場合](https://releases.portaldots.com/downloads/latest.zip?major_version=4)
5. `4.` でダウンロードしたZIPファイルを展開し、FTPソフトでサーバーにアップロードします。
6. `5.` でアップロードしたファイルのうち、 `.env` ファイル、 `storage` フォルダー内の `app` フォルダー、`cron` フォルダー内の `lolipop.sh` ファイル（存在する場合のみ）を、 `2.` でダウンロードしたファイルで上書きアップロードします。
7. PortalDotsにアクセスし、正常に動作するか確認してください。

## 再インストール後、エラーが表示された場合 <a href="#error" id="error"></a>

再インストール後、「データベース接続エラー」などのエラーが表示された場合、以下の手順に従ってください。

{% hint style="warning" %}
この手順を実施すると、PortalDotsの設定（ポータルの名前、MySQLデータベース設定、メール配信の設定など）は削除されるため、再設定が必要になります。この場合でも、データベース上に保存されているデータは削除されません。
{% endhint %}

1. FTPソフトでアップロードしたファイルのうち `.env` ファイルを削除します。
2. PortalDotsにアクセスし、PortalDotsのインストーラーが起動することを確認します。
3. PortalDotsのインストーラーで、PortalDotsの設定を行います。
    * 「管理者ユーザーの作成」画面では、今までPortalDotsに登録したことがないユーザーの情報を入力する必要があります（このユーザーは管理者として登録されますのでご注意ください）。
